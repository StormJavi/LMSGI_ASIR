<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerPlanet</title>
    <link rel="stylesheet" href="css/detalle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
    <header>
        <div id ="menu">
            <i class="fa-solid fa-bars"></i>
        </div>
            <figure><img src="img/logo2.png" alt="logo"></figure>
            <form>
                <input type="search" placeholder="Buscar...">
            </form>

            <nav>
                <a href="#">Ofertas Limitadas</a>
                <a href="#">Â¡ContÃ¡ctanos!</a>
                <a href="#">ES</a>
            </nav>
            <div id="carrito">
                <a href=""><i class="fa-solid fa-user"></i></a>
                <a href=""><i class="fa-solid fa-cart-shopping"></i></a>
            </div>
    </header>
    <main>
        <nav id="inicio">
            <a href="#"><i class="fa-solid fa-house"></i></a>
            >
            <a href="#">TV y video</a>
            >
            <a href="#">Televisores Smart TV</a>
            >
            <a href="#">Televisores Xiaomi</a>
        </nav>
        
        <figure class="galeria">
            <img src="img/productos/television.jpg" alt="Vista 1">
            <img src="img/productos/television_2.jpg" alt="Vista 2">
            <img src="img/productos/television_3.jpg" alt="Vista 3">
            <img src="img/productos/television_4.jpg" alt="Vista 4">
            <img src="img/productos/energia_television.jpg" alt="Vista 4">
        </figure>
        <figure id="portada">
            <div class="badges">
                <div class="badge-friday">FRESH FRIDAY</div>
                <div class="badge-envio">EnvÃ­o gratis</div>
            </div>
            <img src="img/productos/television.jpg">
        </figure>
        <article id="caracteristicas">
            <h1 class="title">Xiaomi TV A 43 2025 4K UHD Dolby Audio - TelevisiÃ³n con Google TV</h1>
            <div class="valoraciones">
                <span class="star">
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                </span>
                <span class="nvaloraciones">191</span>
                <span class="comentarios">(133 opiniones) Â¡Opina!</span>
            </div>
            <div class="price-section">
                <span class="discount-badge">-43%</span>
                <span class="current-price">199,90â‚¬</span>
            </div>
            <div>
                <p class="recommended-price">Precio recomendado: 349,00â‚¬</p>
                <p style="color: #999; font-size: 13px;">Los precios incluyen IVA</p>
            </div>

            <a href="#" class="brand">XIAOMI</a>
            <p style="color: #666; font-size: 13px;">REF: ELA5493EU</p>

            <div class="availability">
                <div class="icon-delivery">ðŸšš</div>
                <div class="availability-info">
                    <strong>Disponibilidad: Â¡En stock! RecÃ­belo maÃ±ana MiÃ©rcoles, 26 Nov.</strong>
                    <span>EnvÃ­o : Â¡Gratis!</span>
                    <span>DevoluciÃ³n Gratis: Hasta 8 de Febrero</span>
                    <span>GarantÃ­a: 3 aÃ±os</span>
                </div>
            </div>
        </article>
    </main>
</body>
</html>

<script>
    

    // 1-. Obtener los parametros de la URL
    const urlParmans = new URLSearchParams(window.location.search);
    // 2-. Obtener el parametro 'id'
    const idProd = parseInt(urlParmans.get('id'))
    //comprobar que el id llega al detalle.html a traves de la URL
    console.log ("--->", idProd)

     fetch('./js/productos.json')
        .then(response => response.json())
        .then ( productos => {
            //buscar producto en array productos
            const producto = productos.find(p => p.id === idProd)
            
            console.log("-1->",producto)
            console.log("-2->", producto.nombre, producto.precio)
           
           
            // aActualiza nombre
            document.getElementById('nombre').textContent = producto.nombre;
            document.getElementById('dto').textContent = `- ${producto.descuento}  %`;
            
            //cambiar portada
            document.getElementById('foto').setAttribute("src", producto.imagen);

            // **** galeria dinamica ****
            
            const galeria = document.getElementById('inicio');
            galeria.innerHTML='';
            producto.galeria.forEach(img => {
                let imagen = document.createElement('img');
                imagen.setAttribute("src", img)
                galeria.appendChild(imagen)
            })
        })

       
</script>